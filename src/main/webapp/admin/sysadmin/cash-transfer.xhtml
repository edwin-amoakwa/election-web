<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../template.xhtml" 
                xmlns:stately="jakarta.faces.composite/stately">

            <ui:define name="pageTitle">                
                #{msg.cash_transactions}
            </ui:define>
            
            <ui:define name="content">
                

                
                <h:panelGroup id="cashTransferPanel">
                    
                    <div class="row">
                        
                        <div class="col-lg-3">
                            <h:form id="cashInputForm">      

                                <h:panelGrid columns="1" class="spaced-table">

                                    <h:outputText value="#{msg.value_date}"/>
                                    <p:calendar value="#{cashTransferController.cashTransfer.valueDate}" 
                                            pattern="#{msg.date_pattern_1}" navigator="true" />

<!--                                </h:panelGrid>

                                <h:panelGrid columns="4" styleClass="spaced-table">-->

                                    <h:outputText value="From Account"/>
                                    <p:selectOneMenu value="#{cashTransferController.cashTransfer.fromAccount}"
                                                     filter="true" filterMatchMode="contains" required="true">
                                        <f:selectItem itemLabel="#{msg.select_one}" /> 
                                        <f:selectItems value="#{userCommonOptions.accountsList}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="To Account"/>
                                    <p:selectOneMenu value="#{cashTransferController.cashTransfer.toAccount}"
                                                     filter="true" filterMatchMode="contains" required="true">
                                        <f:selectItem itemLabel="#{msg.select_one}" /> 
                                        <f:selectItems value="#{userCommonOptions.accountsList}" />
                                    </p:selectOneMenu>

                                    <h:outputText value="#{msg.amount}"/>
                                    <p:inputText value="#{cashTransferController.cashTransfer.amount}" styleClass="text-right">
                                        <f:convertNumber pattern="#,##0.0" />
                                    </p:inputText>

                                    <h:outputText value="#{msg.narration}"/>
                                    <p:inputTextarea value="#{cashTransferController.cashTransfer.narration}"  />

                                    <f:facet name="footer">
                                        <center style="margin: 5px;">
                                            <stately:formControl ajax="false"
                                                saveButtonAction="#{cashTransferController.saveCashTransfer()}" 
                                                                 cancelButtonAction="#{cashTransferController.initCashTransfer()}" /> 
                                        </center>

                                    </f:facet>

                                </h:panelGrid>

                            </h:form>
                        </div>

                        <div class="col-lg-9">

                            
                                <center>
                                    <h:form>
                                        
                                        <h:panelGrid columns="9" styleClass="spaced-table">
                                            
                                                  <h:outputText value="Date From" />
                                            <p:calendar value="#{cashTransferController.dateRange.fromDate}" 
                                                        pattern="#{msg.date_pattern_1}" navigator="true" />

                                            <h:outputText value="Date To" />
                                            <p:calendar value="#{cashTransferController.dateRange.toDate}" 
                                                        pattern="#{msg.date_pattern_1}" navigator="true" />
                                            
                                        </h:panelGrid>
                                        
                                        
                                        <h:panelGrid columns="9" styleClass="spaced-table">
                                      

                                            <h:outputText value="From Account" />
                                            <p:selectOneMenu value="#{cashTransferController.selectedFromAccount}"
                                                             filterMatchMode="contains" filter="true">
                                                <f:selectItem itemLabel="#{msg.select_one}" />
                                                <f:selectItems value="#{userCommonOption.ledgerAccountsList}" />
                                            </p:selectOneMenu>

                                            <h:outputText value="To Account" />
                                            <p:selectOneMenu value="#{cashTransferController.selectedToAccount}"
                                                             filterMatchMode="contains" filter="true">
                                                <f:selectItem itemLabel="#{msg.select_one}" />
                                                <f:selectItems value="#{userCommonOption.ledgerAccountsList}" />
                                            </p:selectOneMenu>

                                            <h:commandButton value="Load" action="#{cashTransferController.loadCashTransfers()}" 
                                                             styleClass="btn btn-primary"/>
                                        </h:panelGrid>

                                    </h:form>
                                </center>

                                <h:form id="transactionsList">

                                    <p:dataTable value="#{cashTransferController.cashTransfersList}" var="cashTransfer">

                                        <p:column headerText="#{msg.value_date}">
                                            <h:outputText value="#{cashTransfer.valueDate}" >
                                                <f:convertDateTime pattern="#{msg.date_pattern_1}" type="localDate"/>
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="#{msg.narration}">
                                            <h:outputText value="#{cashTransfer.narration}" />
                                        </p:column>

                                        <p:column headerText="From Account">
                                            <h:outputText value="#{cashTransfer.fromAccount.accountName}" />
                                        </p:column>

                                        <p:column headerText="To Account">
                                            <h:outputText value="#{cashTransfer.toAccount.accountName}" />
                                        </p:column>

                                        <p:column headerText="#{msg.amount}" styleClass="text-right">
                                            <h:outputText value="#{cashTransfer.amount}">
                                                <f:convertNumber pattern="#,##0.00" />
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="#{msg.action}">
                                            <p:commandLink value="#{msg.select}" ajax="true" update="cashTransferPanel,:cashInputForm"
                                                           action="#{cashTransferController.selectCashTransfer(cashTransfer)}" />
                                        </p:column>

                                        <p:column headerText="#{msg.action}">
                                            <h:commandLink value="#{msg.delete}" 
                                                           onclick="return confirm('Are you sure? Continue to Delete? ');"
                                                           action="#{cashTransferController.deleteCashTransfer(cashTransfer)}"
                                                           style="color:#d14;"/>
                                        </p:column>

                                    </p:dataTable>
                                    

                                </h:form>
                        
                        </div>

                    </div>
                    
                
                    <br />
                    <p:separator />
                    <center>
                        <h:form rendered="false">
                            <p:commandLink value="Close" styleClass="btn btn-danger" ajax="false"
                                           action="#{cashTransferController.closePage()}"/>
                        </h:form>
                    </center>

                </h:panelGroup>

            </ui:define>

        </ui:composition>


